{"ast":null,"code":"const DEFAULT_SETTINGS={notifications:{enabled:true,minPriority:1,soundEnabled:true,desktopNotifications:true},filters:{categories:[],minSuccessRate:0.65,chains:[],protocols:[]},appearance:{theme:'light'}};const STORAGE_KEYS={GENERAL_SETTINGS:'whalewatch_settings',NOTIFICATION_SETTINGS:'whalewatch_notifications',PIONEER_SETTINGS:'whalewatch_pioneer_settings',PIONEER_FILTERS:'whalewatch_pioneer_filters'};class SettingsService{constructor(){this.STORAGE_KEY='defi-pioneer-watch-settings';this.settings=void 0;const savedSettings=localStorage.getItem(this.STORAGE_KEY);this.settings=savedSettings?{...DEFAULT_SETTINGS,...JSON.parse(savedSettings)}:DEFAULT_SETTINGS;}getSettings(){return{...this.settings};}updateSettings(newSettings){this.settings={...this.settings,...newSettings};this.saveSettings();}updateNotificationSettings(settings){this.settings.notifications={...this.settings.notifications,...settings};this.saveSettings();}updateFilterSettings(settings){this.settings.filters={...this.settings.filters,...settings};this.saveSettings();}setTheme(theme){this.settings.appearance={...this.settings.appearance,theme};this.saveSettings();}shouldNotify(priority){return this.settings.notifications.enabled&&priority>=this.settings.notifications.minPriority;}saveSettings(){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(this.settings));}// Pioneer Settings\ngetPioneerSettings(){const defaultSettings={minTransactions:50,minSuccessRate:0.65,updateInterval:300,notificationSettings:{protocolSignals:true,strategySignals:true,trendSignals:true},lastUpdateTimestamp:Date.now()};try{const stored=localStorage.getItem(STORAGE_KEYS.PIONEER_SETTINGS);if(!stored)return defaultSettings;const parsed=JSON.parse(stored);return{...defaultSettings,...parsed,notificationSettings:{...defaultSettings.notificationSettings,...parsed.notificationSettings}};}catch(error){console.error('Failed to load pioneer settings:',error);return defaultSettings;}}savePioneerSettings(settings){try{const current=this.getPioneerSettings();const updated={...current,...settings,notificationSettings:{...current.notificationSettings,...(settings.notificationSettings||{})},lastUpdateTimestamp:Date.now()};localStorage.setItem(STORAGE_KEYS.PIONEER_SETTINGS,JSON.stringify(updated));// Dispatch event for real-time updates\nwindow.dispatchEvent(new CustomEvent('pioneerSettingsChanged',{detail:updated}));}catch(error){console.error('Failed to save pioneer settings:',error);throw error;}}getPioneerFilters(){const defaultFilters={categories:[],minSuccessRate:0.65,chains:[],protocols:[]};try{const stored=localStorage.getItem(STORAGE_KEYS.PIONEER_FILTERS);if(!stored)return defaultFilters;return{...defaultFilters,...JSON.parse(stored)};}catch(error){console.error('Failed to load pioneer filters:',error);return defaultFilters;}}savePioneerFilters(filters){try{const current=this.getPioneerFilters();const updated={...current,...filters};localStorage.setItem(STORAGE_KEYS.PIONEER_FILTERS,JSON.stringify(updated));// Dispatch event for real-time updates\nwindow.dispatchEvent(new CustomEvent('pioneerFiltersChanged',{detail:updated}));}catch(error){console.error('Failed to save pioneer filters:',error);throw error;}}clearPioneerData(){try{localStorage.removeItem(STORAGE_KEYS.PIONEER_SETTINGS);localStorage.removeItem(STORAGE_KEYS.PIONEER_FILTERS);// Dispatch events to notify of cleared data\nwindow.dispatchEvent(new Event('pioneerSettingsChanged'));window.dispatchEvent(new Event('pioneerFiltersChanged'));}catch(error){console.error('Failed to clear pioneer data:',error);throw error;}}}const settingsService=new SettingsService();export default settingsService;","map":{"version":3,"names":["DEFAULT_SETTINGS","notifications","enabled","minPriority","soundEnabled","desktopNotifications","filters","categories","minSuccessRate","chains","protocols","appearance","theme","STORAGE_KEYS","GENERAL_SETTINGS","NOTIFICATION_SETTINGS","PIONEER_SETTINGS","PIONEER_FILTERS","SettingsService","constructor","STORAGE_KEY","settings","savedSettings","localStorage","getItem","JSON","parse","getSettings","updateSettings","newSettings","saveSettings","updateNotificationSettings","updateFilterSettings","setTheme","shouldNotify","priority","setItem","stringify","getPioneerSettings","defaultSettings","minTransactions","updateInterval","notificationSettings","protocolSignals","strategySignals","trendSignals","lastUpdateTimestamp","Date","now","stored","parsed","error","console","savePioneerSettings","current","updated","window","dispatchEvent","CustomEvent","detail","getPioneerFilters","defaultFilters","savePioneerFilters","clearPioneerData","removeItem","Event","settingsService"],"sources":["/Users/toyguntez/Visual Studio /Whale-Watch-Predictive-on-chain-signals/frontend/src/services/SettingsService.ts"],"sourcesContent":["import { PioneerSettings } from '../types';\n\ninterface NotificationSettings {\n  enabled: boolean;\n  minPriority: number;\n  soundEnabled: boolean;\n  desktopNotifications: boolean;\n}\n\ninterface FilterSettings {\n  categories: string[];\n  minSuccessRate: number;\n  chains: string[];\n  protocols: string[];\n}\n\ninterface UserSettings {\n  notifications: NotificationSettings;\n  filters: FilterSettings;\n  appearance: {\n    theme: 'light' | 'dark';\n  };\n}\n\nconst DEFAULT_SETTINGS: UserSettings = {\n  notifications: {\n    enabled: true,\n    minPriority: 1,\n    soundEnabled: true,\n    desktopNotifications: true\n  },\n  filters: {\n    categories: [],\n    minSuccessRate: 0.65,\n    chains: [],\n    protocols: []\n  },\n  appearance: {\n    theme: 'light'\n  }\n};\n\nconst STORAGE_KEYS = {\n  GENERAL_SETTINGS: 'whalewatch_settings',\n  NOTIFICATION_SETTINGS: 'whalewatch_notifications',\n  PIONEER_SETTINGS: 'whalewatch_pioneer_settings',\n  PIONEER_FILTERS: 'whalewatch_pioneer_filters'\n};\n\ninterface StoredPioneerSettings extends PioneerSettings {\n  lastUpdateTimestamp: number;\n}\n\nclass SettingsService {\n  private readonly STORAGE_KEY = 'defi-pioneer-watch-settings';\n  private settings: UserSettings;\n\n  constructor() {\n    const savedSettings = localStorage.getItem(this.STORAGE_KEY);\n    this.settings = savedSettings\n      ? { ...DEFAULT_SETTINGS, ...JSON.parse(savedSettings) }\n      : DEFAULT_SETTINGS;\n  }\n\n  getSettings(): UserSettings {\n    return { ...this.settings };\n  }\n\n  updateSettings(newSettings: Partial<UserSettings>) {\n    this.settings = {\n      ...this.settings,\n      ...newSettings,\n    };\n    this.saveSettings();\n  }\n\n  updateNotificationSettings(settings: Partial<NotificationSettings>) {\n    this.settings.notifications = {\n      ...this.settings.notifications,\n      ...settings,\n    };\n    this.saveSettings();\n  }\n\n  updateFilterSettings(settings: Partial<FilterSettings>) {\n    this.settings.filters = {\n      ...this.settings.filters,\n      ...settings,\n    };\n    this.saveSettings();\n  }\n\n  setTheme(theme: 'light' | 'dark') {\n    this.settings.appearance = {\n      ...this.settings.appearance,\n      theme\n    };\n    this.saveSettings();\n  }\n\n  shouldNotify(priority: number): boolean {\n    return (\n      this.settings.notifications.enabled &&\n      priority >= this.settings.notifications.minPriority\n    );\n  }\n\n  private saveSettings() {\n    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(this.settings));\n  }\n\n  // Pioneer Settings\n  public getPioneerSettings(): StoredPioneerSettings {\n    const defaultSettings: StoredPioneerSettings = {\n      minTransactions: 50,\n      minSuccessRate: 0.65,\n      updateInterval: 300,\n      notificationSettings: {\n        protocolSignals: true,\n        strategySignals: true,\n        trendSignals: true\n      },\n      lastUpdateTimestamp: Date.now()\n    };\n\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.PIONEER_SETTINGS);\n      if (!stored) return defaultSettings;\n\n      const parsed = JSON.parse(stored);\n      return {\n        ...defaultSettings,\n        ...parsed,\n        notificationSettings: {\n          ...defaultSettings.notificationSettings,\n          ...parsed.notificationSettings\n        }\n      };\n    } catch (error) {\n      console.error('Failed to load pioneer settings:', error);\n      return defaultSettings;\n    }\n  }\n\n  public savePioneerSettings(settings: Partial<PioneerSettings>): void {\n    try {\n      const current = this.getPioneerSettings();\n      const updated: StoredPioneerSettings = {\n        ...current,\n        ...settings,\n        notificationSettings: {\n          ...current.notificationSettings,\n          ...(settings.notificationSettings || {})\n        },\n        lastUpdateTimestamp: Date.now()\n      };\n\n      localStorage.setItem(\n        STORAGE_KEYS.PIONEER_SETTINGS,\n        JSON.stringify(updated)\n      );\n\n      // Dispatch event for real-time updates\n      window.dispatchEvent(\n        new CustomEvent('pioneerSettingsChanged', { detail: updated })\n      );\n    } catch (error) {\n      console.error('Failed to save pioneer settings:', error);\n      throw error;\n    }\n  }\n\n  public getPioneerFilters() {\n    const defaultFilters = {\n      categories: [],\n      minSuccessRate: 0.65,\n      chains: [],\n      protocols: []\n    };\n\n    try {\n      const stored = localStorage.getItem(STORAGE_KEYS.PIONEER_FILTERS);\n      if (!stored) return defaultFilters;\n\n      return {\n        ...defaultFilters,\n        ...JSON.parse(stored)\n      };\n    } catch (error) {\n      console.error('Failed to load pioneer filters:', error);\n      return defaultFilters;\n    }\n  }\n\n  public savePioneerFilters(filters: {\n    categories?: string[];\n    minSuccessRate?: number;\n    chains?: string[];\n    protocols?: string[];\n  }): void {\n    try {\n      const current = this.getPioneerFilters();\n      const updated = {\n        ...current,\n        ...filters\n      };\n\n      localStorage.setItem(\n        STORAGE_KEYS.PIONEER_FILTERS,\n        JSON.stringify(updated)\n      );\n\n      // Dispatch event for real-time updates\n      window.dispatchEvent(\n        new CustomEvent('pioneerFiltersChanged', { detail: updated })\n      );\n    } catch (error) {\n      console.error('Failed to save pioneer filters:', error);\n      throw error;\n    }\n  }\n\n  public clearPioneerData(): void {\n    try {\n      localStorage.removeItem(STORAGE_KEYS.PIONEER_SETTINGS);\n      localStorage.removeItem(STORAGE_KEYS.PIONEER_FILTERS);\n\n      // Dispatch events to notify of cleared data\n      window.dispatchEvent(new Event('pioneerSettingsChanged'));\n      window.dispatchEvent(new Event('pioneerFiltersChanged'));\n    } catch (error) {\n      console.error('Failed to clear pioneer data:', error);\n      throw error;\n    }\n  }\n}\n\nconst settingsService = new SettingsService();\nexport default settingsService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}